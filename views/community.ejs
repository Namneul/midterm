<% layout('layout') -%>

<div class="container mt-4">
    <h1 class="text-3xl font-bold text-gray-800 mb-2"><%= title %> Hub</h1>
    <p class="text-gray-600 mb-8">경매, 자유게시판, 채팅 등 모든 활동을 모아보는 곳입니다.</p>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <!-- 1. 최신 활동 (lg 화면에서 2칸 차지) -->
        <div class="lg:col-span-2">
            <div class="bg-white shadow rounded-lg h-full">
                <div class="px-4 py-5 sm:px-6 border-b border-gray-200">
                    <h5 class="text-lg font-semibold text-gray-900">최신 활동</h5>
                </div>
                <div class="p-4 sm:p-6 space-y-4">
                    <% if (recentActivity && recentActivity.length > 0) { %>
                        <% recentActivity.forEach(activity => { %>
                            <a href="<%= activity.href %>" class="block p-3 bg-gray-50 rounded-md hover:bg-gray-100 border border-gray-200">
                                <div class="flex justify-between items-start mb-1">
                                    <h6 class="font-medium text-indigo-700 truncate mr-2"><%= activity.title %></h6>
                                    <small class="text-xs text-gray-400 whitespace-nowrap"><%= new Date(activity.createdAt).toLocaleDateString() %></small>
                                </div>
                                <p class="text-sm text-gray-600 truncate mb-1">
                                    <% if (activity.type === 'auction') { %>
                                        <span class="text-xs font-medium mr-1 px-1.5 py-0.5 rounded bg-red-100 text-red-800">경매</span> 현재가: <%= activity.currentPrice.toLocaleString() %> 원
                                    <% } else if (activity.type === 'board') { %>
                                        <span class="text-xs font-medium mr-1 px-1.5 py-0.5 rounded bg-green-100 text-green-800">게시글</span> <%= activity.content.substring(0, 50) %>...
                                    <% } else if (activity.type === 'buySell') { %>
                                        <% if (activity.postType === 'sell') { %><span class="text-xs font-medium mr-1 px-1.5 py-0.5 rounded bg-red-100 text-red-800">팝니다</span><% } else { %><span class="text-xs font-medium mr-1 px-1.5 py-0.5 rounded bg-blue-100 text-blue-800">삽니다</span><% } %>
                                        <%= activity.content.substring(0, 50) %>...
                                    <% } %>
                                </p>
                                <small class="text-xs text-gray-500">
                                    by <%= activity.authorNickname || activity.sellerNickname %> (<%= activity.authorReputation || activity.sellerReputationSnapshot || 0 %>점)
                                </small>
                            </a>
                        <% }) %>
                    <% } else { %>
                        <p class="text-center text-gray-500 py-4">최근 활동이 없습니다.</p>
                    <% } %>
                </div>
            </div>
        </div>

        <!-- 2. 바로가기 (lg 화면에서 1칸 차지) -->
        <div class="lg:col-span-1">
            <div class="bg-white shadow rounded-lg h-full">
                <div class="px-4 py-5 sm:px-6 border-b border-gray-200">
                    <h5 class="text-lg font-semibold text-gray-900">바로가기</h5>
                </div>
                <div class="p-4 sm:p-6 space-y-3">
                    <a class="block w-full text-center py-3 px-4 border border-green-300 rounded-md shadow-sm text-sm font-medium text-green-700 bg-green-50 hover:bg-green-100" href="/board">
                        <b>자유게시판</b> <span class="text-xs">(글/댓글)</span>
                    </a>
                    <a class="block w-full text-center py-3 px-4 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-red-50 hover:bg-red-100" href="/community/auction">
                        <b>실시간 경매</b> <span class="text-xs">(경매 목록)</span>
                    </a>
                    <a class="block w-full text-center py-3 px-4 border border-blue-300 rounded-md shadow-sm text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100" href="/community/buy-sell">
                        <b>사고팔고</b> <span class="text-xs">(게시판)</span>
                    </a>
                    <a class="block w-full text-center py-3 px-4 border border-purple-300 rounded-md shadow-sm text-sm font-medium text-purple-700 bg-purple-50 hover:bg-purple-100" href="/community/chat">
                        <b>자유수다</b> <span class="text-xs">(실시간 채팅)</span>
                    </a>
                </div>
            </div>
        </div>

    </div>
</div>
