<% layout('layout') -%>

<h1 class="text-2xl font-bold text-gray-800 mb-2"><%= title %> (신원 조회)</h1>
<p class="text-sm text-gray-600 mb-6">
    분쟁 발생 또는 신고 접수 시, 익명 닉네임을 조회하여 실제 신원을 확인합니다.
</p>

<form action="/admin/search" method="POST" class="mb-8 max-w-lg">
    <label for="anonymousNickname" class="block text-sm font-medium text-gray-700">익명 닉네임 검색</label>
    <div class="mt-1 flex rounded-md shadow-sm">
        <input type="text" name="anonymousNickname" id="anonymousNickname" required placeholder="예: 친절한 다람쥐123" class="flex-1 min-w-0 block w-full px-3 py-2 rounded-none rounded-l-md focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border-gray-300">
        <button type="submit" class="inline-flex items-center px-4 py-2 border border-l-0 border-gray-300 rounded-r-md bg-gray-50 text-sm font-medium text-gray-700 hover:bg-gray-100 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500">
            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
            <span class="ml-2">조회</span>
        </button>
    </div>
</form>

<% if (searchResult) { %>
    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-md shadow-sm">
        <h4 class="text-lg font-semibold text-yellow-800 mb-3">조회 결과</h4>
        <dl class="space-y-1 text-sm text-yellow-700">
            <div class="grid grid-cols-3 gap-1"> <dt class="font-medium col-span-1">익명 닉네임:</dt> <dd class="col-span-2"><%= searchResult.anonymous_nickname %></dd> </div>
            <div class="grid grid-cols-3 gap-1"> <dt class="font-medium col-span-1">로그인 ID:</dt> <dd class="col-span-2"><%= searchResult.Id %></dd> </div>
            <div class="grid grid-cols-3 gap-1"> <dt class="font-medium col-span-1">실명:</dt> <dd class="col-span-2"><%= searchResult.name %></dd> </div>
            <div class="grid grid-cols-3 gap-1"> <dt class="font-medium col-span-1">이메일:</dt> <dd class="col-span-2"><%= searchResult.email %></dd> </div>
            <div class="grid grid-cols-3 gap-1"> <dt class="font-medium col-span-1">학교:</dt> <dd class="col-span-2"><%= searchResult.university %></dd> </div>
            <div class="grid grid-cols-3 gap-1"> <dt class="font-medium col-span-1">학번:</dt> <dd class="col-span-2"><%= searchResult.studentNum %></dd> </div>
        </dl>
    </div>
<% } else if (typeof searchResult !== 'undefined') { %> <%# 검색은 했으나 결과가 없을 때 %>
<p class="text-gray-500">해당 닉네임의 사용자를 찾을 수 없습니다.</p>
<% } %>
